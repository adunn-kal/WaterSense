<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME507 Utility Library: Share&lt; DataType &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ME507 Utility Library
   &#160;<span id="projectnumber">0.2.1</span>
   </div>
   <div id="projectbrief">Mechatronics Course Support Software for ARM/Arduino/FreeRTOS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classShare.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classShare-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Share&lt; DataType &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class for data to be shared in a thread-safe manner between tasks.  
 <a href="classShare.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="taskshare_8h_source.html">taskshare.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Share&lt; DataType &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classShare__inherit__graph.png" border="0" usemap="#Share_3_01DataType_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="Share_3_01DataType_01_4_inherit__map" id="Share_3_01DataType_01_4_inherit__map">
<area shape="rect" title="Class for data to be shared in a thread&#45;safe manner between tasks." alt="" coords="5,80,156,107"/>
<area shape="rect" href="classBaseShare.html" title="Base class for classes that share data in a thread&#45;safe manner between tasks." alt="" coords="35,5,126,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Share&lt; DataType &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classShare__coll__graph.png" border="0" usemap="#Share_3_01DataType_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="Share_3_01DataType_01_4_coll__map" id="Share_3_01DataType_01_4_coll__map">
<area shape="rect" title="Class for data to be shared in a thread&#45;safe manner between tasks." alt="" coords="5,84,156,111"/>
<area shape="rect" href="classBaseShare.html" title="Base class for classes that share data in a thread&#45;safe manner between tasks." alt="" coords="35,7,126,33"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0948b04d00aef072f25af2f49ecfa259"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classShare.html#a0948b04d00aef072f25af2f49ecfa259">Share</a> (const char *p_name=NULL)</td></tr>
<tr class="memdesc:a0948b04d00aef072f25af2f49ecfa259"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a shared data item.  <a href="classShare.html#a0948b04d00aef072f25af2f49ecfa259">More...</a><br /></td></tr>
<tr class="separator:a0948b04d00aef072f25af2f49ecfa259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef08e3bc0686d8032f40613be8c13df4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classShare.html#aef08e3bc0686d8032f40613be8c13df4">put</a> (DataType new_data)</td></tr>
<tr class="memdesc:aef08e3bc0686d8032f40613be8c13df4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put data into the shared data item.  <a href="classShare.html#aef08e3bc0686d8032f40613be8c13df4">More...</a><br /></td></tr>
<tr class="separator:aef08e3bc0686d8032f40613be8c13df4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f14732a5337d8d54e36de7c8bfc6459"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classShare.html#a2f14732a5337d8d54e36de7c8bfc6459">ISR_put</a> (DataType new_data)</td></tr>
<tr class="memdesc:a2f14732a5337d8d54e36de7c8bfc6459"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put data into the shared data item from within an ISR.  <a href="classShare.html#a2f14732a5337d8d54e36de7c8bfc6459">More...</a><br /></td></tr>
<tr class="separator:a2f14732a5337d8d54e36de7c8bfc6459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4990baa4c1ea5572618520c5a3b39e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classShare.html#ab4990baa4c1ea5572618520c5a3b39e7">operator&lt;&lt;</a> (DataType new_data)</td></tr>
<tr class="memdesc:ab4990baa4c1ea5572618520c5a3b39e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operator which inserts data into the share.  <a href="classShare.html#ab4990baa4c1ea5572618520c5a3b39e7">More...</a><br /></td></tr>
<tr class="separator:ab4990baa4c1ea5572618520c5a3b39e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38fb597f730afaf9fac97240b0286f55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classShare.html#a38fb597f730afaf9fac97240b0286f55">operator&gt;&gt;</a> (DataType put_here)</td></tr>
<tr class="memdesc:a38fb597f730afaf9fac97240b0286f55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from the shared data item.  <a href="classShare.html#a38fb597f730afaf9fac97240b0286f55">More...</a><br /></td></tr>
<tr class="separator:a38fb597f730afaf9fac97240b0286f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a979bfb3c7bf8aa5f0601a649553d516c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classShare.html#a979bfb3c7bf8aa5f0601a649553d516c">get</a> (DataType &amp;recv_data)</td></tr>
<tr class="memdesc:a979bfb3c7bf8aa5f0601a649553d516c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from the shared data item into a variable.  <a href="classShare.html#a979bfb3c7bf8aa5f0601a649553d516c">More...</a><br /></td></tr>
<tr class="separator:a979bfb3c7bf8aa5f0601a649553d516c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac544379dc98c1d1424efca1083baef7d"><td class="memItemLeft" align="right" valign="top">DataType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classShare.html#ac544379dc98c1d1424efca1083baef7d">get</a> (void)</td></tr>
<tr class="memdesc:ac544379dc98c1d1424efca1083baef7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read and return data from the shared data item.  <a href="classShare.html#ac544379dc98c1d1424efca1083baef7d">More...</a><br /></td></tr>
<tr class="separator:ac544379dc98c1d1424efca1083baef7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f69eaea2dd026247dd6772a1aea23c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classShare.html#a6f69eaea2dd026247dd6772a1aea23c4">ISR_get</a> (DataType &amp;recv_data)</td></tr>
<tr class="memdesc:a6f69eaea2dd026247dd6772a1aea23c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from the shared data item, from within an ISR.  <a href="classShare.html#a6f69eaea2dd026247dd6772a1aea23c4">More...</a><br /></td></tr>
<tr class="separator:a6f69eaea2dd026247dd6772a1aea23c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c77e37949f1e231c2c0e5b387eb3ee0"><td class="memItemLeft" align="right" valign="top">DataType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classShare.html#a8c77e37949f1e231c2c0e5b387eb3ee0">ISR_get</a> (void)</td></tr>
<tr class="memdesc:a8c77e37949f1e231c2c0e5b387eb3ee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read and return data from the shared data item, from within an ISR.  <a href="classShare.html#a8c77e37949f1e231c2c0e5b387eb3ee0">More...</a><br /></td></tr>
<tr class="separator:a8c77e37949f1e231c2c0e5b387eb3ee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbda236ee6fe392200a766d7e4e8a080"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classShare.html#afbda236ee6fe392200a766d7e4e8a080">print_in_list</a> (Print &amp;printer)</td></tr>
<tr class="memdesc:afbda236ee6fe392200a766d7e4e8a080"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the name and type (share) of this data item.  <a href="classShare.html#afbda236ee6fe392200a766d7e4e8a080">More...</a><br /></td></tr>
<tr class="separator:afbda236ee6fe392200a766d7e4e8a080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classBaseShare"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classBaseShare')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classBaseShare.html">BaseShare</a></td></tr>
<tr class="memitem:a73741a4ad0b9b54f6f6da20855c2e30b inherit pub_methods_classBaseShare"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseShare.html#a73741a4ad0b9b54f6f6da20855c2e30b">BaseShare</a> (const char *p_name=NULL)</td></tr>
<tr class="memdesc:a73741a4ad0b9b54f6f6da20855c2e30b inherit pub_methods_classBaseShare"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a base shared data item.  <a href="classBaseShare.html#a73741a4ad0b9b54f6f6da20855c2e30b">More...</a><br /></td></tr>
<tr class="separator:a73741a4ad0b9b54f6f6da20855c2e30b inherit pub_methods_classBaseShare"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a1b82b2d5fa5e69b0445fb5a718a9575a"><td class="memItemLeft" align="right" valign="top"><a id="a1b82b2d5fa5e69b0445fb5a718a9575a"></a>
QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classShare.html#a1b82b2d5fa5e69b0445fb5a718a9575a">queue</a></td></tr>
<tr class="memdesc:a1b82b2d5fa5e69b0445fb5a718a9575a"><td class="mdescLeft">&#160;</td><td class="mdescRight">A queue is used to hold the data, as it's portable to different CPU's. <br /></td></tr>
<tr class="separator:a1b82b2d5fa5e69b0445fb5a718a9575a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classBaseShare"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classBaseShare')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classBaseShare.html">BaseShare</a></td></tr>
<tr class="memitem:abc438f82d56097f13a1e791dcd617a72 inherit pro_attribs_classBaseShare"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseShare.html#abc438f82d56097f13a1e791dcd617a72">name</a> [16]</td></tr>
<tr class="memdesc:abc438f82d56097f13a1e791dcd617a72 inherit pro_attribs_classBaseShare"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of the shared item.  <a href="classBaseShare.html#abc438f82d56097f13a1e791dcd617a72">More...</a><br /></td></tr>
<tr class="separator:abc438f82d56097f13a1e791dcd617a72 inherit pro_attribs_classBaseShare"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8077022ea40c4ba44a6ff07ab24cac83 inherit pro_attribs_classBaseShare"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseShare.html">BaseShare</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseShare.html#a8077022ea40c4ba44a6ff07ab24cac83">p_next</a></td></tr>
<tr class="memdesc:a8077022ea40c4ba44a6ff07ab24cac83 inherit pro_attribs_classBaseShare"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the next item in the linked list of shares.  <a href="classBaseShare.html#a8077022ea40c4ba44a6ff07ab24cac83">More...</a><br /></td></tr>
<tr class="separator:a8077022ea40c4ba44a6ff07ab24cac83 inherit pro_attribs_classBaseShare"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_static_attribs_classBaseShare"><td colspan="2" onclick="javascript:toggleInherit('pro_static_attribs_classBaseShare')"><img src="closed.png" alt="-"/>&#160;Static Protected Attributes inherited from <a class="el" href="classBaseShare.html">BaseShare</a></td></tr>
<tr class="memitem:a0657d8a02509e79c3bb418aaa9cce33c inherit pro_static_attribs_classBaseShare"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classBaseShare.html">BaseShare</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseShare.html#a0657d8a02509e79c3bb418aaa9cce33c">p_newest</a> = NULL</td></tr>
<tr class="memdesc:a0657d8a02509e79c3bb418aaa9cce33c inherit pro_static_attribs_classBaseShare"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the most recently created shared data item.  <a href="classBaseShare.html#a0657d8a02509e79c3bb418aaa9cce33c">More...</a><br /></td></tr>
<tr class="separator:a0657d8a02509e79c3bb418aaa9cce33c inherit pro_static_attribs_classBaseShare"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class DataType&gt;<br />
class Share&lt; DataType &gt;</h3>

<p>Class for data to be shared in a thread-safe manner between tasks. </p>
<p>This class implements an item of data which can be shared between tasks without the risk of data corruption associated with global variables. Unlike queues, shares do not use a buffer for many data items; there is only a one-item buffer in which the most recent value of the data is kept. Shares therefore do not provide the task synchronization or incur the overhead associated with queues.</p>
<p>The data is protected by using critical code sections (see the FreeRTOS documentation of <code>portENTER_CRITICAL()</code> ) so that tasks can't interrupt each other when reading or writing the data is taking place. This prevents data corruption due to thread switching. The C++ template mechanism is used to ensure that only data of the correct type is put into or taken from a shared data item. A <code>TaskShare&lt;DataType&gt;</code> object keeps its own separate copy of the data. This uses some memory, but it is necessary to reliably prevent data corruption; it prevents possible side effects from causing the sender's copy of the data from being inadvertently changed.</p>
<h1><a class="anchor" id="usage_share"></a>
Usage</h1>
<p>The following bits of code show how to set up and use a share to transfer data of type <code>uint16_t</code> from one hypothetical task called <code>task_A</code> to another called <code>task_B</code>.</p>
<p>In the file which contains <code>setup()</code> we create a shared data object. The constructor of the <code>Share&lt;uint16_t&gt;</code> class is given a name for the share; the name will be shown on system diagnostic printouts. If it is desired to print diagnostic information to a serial monitor, a pointer to an output stream may also be given: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="taskshare_8h.html">taskshare.h</a>&quot;</span></div>
<div class="line">...<span class="comment"></span></div>
<div class="line"><span class="comment">/// Data from sensor number 3 on the moose&#39;s right antler</span></div>
<div class="line"><span class="comment"></span>Share&lt;uint16_t&gt; my_share (<span class="stringliteral">&quot;Data_3&quot;</span>, &amp;Serial);</div>
</div><!-- fragment --><p> If there are any tasks which use this share in other source files, we must re-declare this share with the keyword <code>extern</code> near the top of those files to make it accessible to those task(s). This copy of the share does not need a Doxygen comment: </p><div class="fragment"><div class="line"><span class="comment">// Sensor 3 (right antler) data</span></div>
<div class="line"><span class="keyword">extern</span> <a class="code" href="classShare.html">Share&lt;uint16_t&gt;</a> my_share;</div>
</div><!-- fragment --><p> In the sending task, data is put into the share: </p><div class="fragment"><div class="line">uint16_t a_data_item = 42;     <span class="comment">///&lt; Holds antler data</span></div>
<div class="line"><span class="comment"></span>...</div>
<div class="line">a_data_item = antler3 ();      <span class="comment">// Get the data</span></div>
<div class="line">my_share.<a class="code" href="classShare.html#aef08e3bc0686d8032f40613be8c13df4">put</a> (a_data_item);    <span class="comment">// Put data into share</span></div>
</div><!-- fragment --><p> In the receiving task, data is read from the share: </p><div class="fragment"><div class="line">uint16_t got_data;             <span class="comment">///&lt; Holds received data</span></div>
<div class="line"><span class="comment"></span>...</div>
<div class="line">my_share.get (got_data);       <span class="comment">// Get local copy of shared data</span></div>
</div><!-- fragment --><p><b>The</b> <b>Easy</b> <b>Way</b> It's also possible to use overloaded stream insertion and extraction operators to interact with the share. These operators contain code which checks if they're running in an interrupt service routine (ISR) or not and use the appropriate method to interact with the internal queue which holds the data, so they're a little slower than <code><a class="el" href="classShare.html#aef08e3bc0686d8032f40613be8c13df4" title="Put data into the shared data item.">put()</a></code> and <code><a class="el" href="classShare.html#ac544379dc98c1d1424efca1083baef7d" title="Read and return data from the shared data item.">get()</a></code>. Usage is as follows, assuming that the share and local variable have been set up above: </p><div class="fragment"><div class="line">my_share &lt;&lt; a_data_item;       <span class="comment">// In sending task</span></div>
<div class="line">...</div>
<div class="line">my_share &gt;&gt; got_data;          <span class="comment">// In receiving task</span></div>
</div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0948b04d00aef072f25af2f49ecfa259"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0948b04d00aef072f25af2f49ecfa259">&#9670;&nbsp;</a></span>Share()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DataType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classShare.html">Share</a>&lt; DataType &gt;::<a class="el" href="classShare.html">Share</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p_name</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a shared data item. </p>
<p>This constructor for a shared data item creates a queue in which to hold one item of data. Note that the data is <b>not</b> initialized. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_name</td><td>A name to be shown in the list of task shares (default <code>NULL</code>) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a979bfb3c7bf8aa5f0601a649553d516c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a979bfb3c7bf8aa5f0601a649553d516c">&#9670;&nbsp;</a></span>get() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DataType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classShare.html">Share</a>&lt; DataType &gt;::get </td>
          <td>(</td>
          <td class="paramtype">DataType &amp;&#160;</td>
          <td class="paramname"><em>recv_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read data from the shared data item into a variable. </p>
<p>This method is used to read data from the shared data item with protection to ensure that the data cannot be corrupted by a task switch. The shared data is copied into the variable which is given as this method's parameter, replacing the previous contents of that variable. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recv_data</td><td>A reference to the variable in which to put received data </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac544379dc98c1d1424efca1083baef7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac544379dc98c1d1424efca1083baef7d">&#9670;&nbsp;</a></span>get() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DataType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DataType <a class="el" href="classShare.html">Share</a>&lt; DataType &gt;::get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read and return data from the shared data item. </p>
<p>This method is used to read data from the shared data item with protection to ensure that the data cannot be corrupted by a task switch. A copy of the shared data is returned. </p><dl class="section return"><dt>Returns</dt><dd>A copy of the data found in the queue, or a default value of the given data type if no data was found in the queue </dd></dl>

</div>
</div>
<a id="a6f69eaea2dd026247dd6772a1aea23c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f69eaea2dd026247dd6772a1aea23c4">&#9670;&nbsp;</a></span>ISR_get() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DataType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classShare.html">Share</a>&lt; DataType &gt;::ISR_get </td>
          <td>(</td>
          <td class="paramtype">DataType &amp;&#160;</td>
          <td class="paramname"><em>recv_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read data from the shared data item, from within an ISR. </p>
<p>This method is used to enable code within an ISR to read data from the shared data item. It must only be called from within an interrupt service routine, not a normal task. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recv_data</td><td>A reference to the variable in which to put received data </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8c77e37949f1e231c2c0e5b387eb3ee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c77e37949f1e231c2c0e5b387eb3ee0">&#9670;&nbsp;</a></span>ISR_get() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DataType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DataType <a class="el" href="classShare.html">Share</a>&lt; DataType &gt;::ISR_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read and return data from the shared data item, from within an ISR. </p>
<p>This method is used to enable code within an ISR to read data from the shared data item. It must only be called from within an interrupt service routine, not a normal task. </p><dl class="section return"><dt>Returns</dt><dd>A copy of the data found in the queue, or a default value of the given data type if no data was found in the queue </dd></dl>

</div>
</div>
<a id="a2f14732a5337d8d54e36de7c8bfc6459"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f14732a5337d8d54e36de7c8bfc6459">&#9670;&nbsp;</a></span>ISR_put()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DataType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classShare.html">Share</a>&lt; DataType &gt;::ISR_put </td>
          <td>(</td>
          <td class="paramtype">DataType&#160;</td>
          <td class="paramname"><em>new_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Put data into the shared data item from within an ISR. </p>
<p>This method writes data from an ISR into the shared data item. It must only be called from within an interrupt service routine, not a normal task. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_data</td><td>The data to be written into the shared data item </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab4990baa4c1ea5572618520c5a3b39e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4990baa4c1ea5572618520c5a3b39e7">&#9670;&nbsp;</a></span>operator&lt;&lt;()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DataType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classShare.html">Share</a>&lt; DataType &gt;::operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">DataType&#160;</td>
          <td class="paramname"><em>new_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Operator which inserts data into the share. </p>
<p>This convenient operator puts data into the share, protecting the data from corruption by thread switching. It checks if the processor is currently in an interupt service routine (ISR); if so, it calls ISR specific functions to prevent corruption, so this function may be used within an ISR or outside one. It runs a little more slowly than the <code><a class="el" href="classShare.html#aef08e3bc0686d8032f40613be8c13df4" title="Put data into the shared data item.">put()</a></code> method. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_data</td><td>The data which is to be put into the share </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a38fb597f730afaf9fac97240b0286f55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38fb597f730afaf9fac97240b0286f55">&#9670;&nbsp;</a></span>operator&gt;&gt;()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DataType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classShare.html">Share</a>&lt; DataType &gt;::operator&gt;&gt; </td>
          <td>(</td>
          <td class="paramtype">DataType&#160;</td>
          <td class="paramname"><em>put_here</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read data from the shared data item. </p>
<p>This method is used to read data from the shared data item with critical section protection to ensure that the data cannot be corrupted by a task switch. The shared data is copied into the variable which is given as this method's parameter, replacing the previous contents. This method checks if the processor is currently in an interupt service routine (ISR) and if so, it calls ISR specific functions to prevent corruption, so this function may be used within an ISR or outside one. It runs a little more slowly than the <code><a class="el" href="classShare.html#ac544379dc98c1d1424efca1083baef7d" title="Read and return data from the shared data item.">get()</a></code> method because of the run-time ISR check. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">put_here</td><td>A reference to the variable in which to put received data </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afbda236ee6fe392200a766d7e4e8a080"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbda236ee6fe392200a766d7e4e8a080">&#9670;&nbsp;</a></span>print_in_list()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DataType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classShare.html">Share</a>&lt; DataType &gt;::print_in_list </td>
          <td>(</td>
          <td class="paramtype">Print &amp;&#160;</td>
          <td class="paramname"><em>printer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print the name and type (share) of this data item. </p>
<p>This method prints the share's name and a word indicating that it is a shared data item, as opposed to a queue, formatted to match similar printouts from other task shares such as queues. After printing this share's information, it looks in the linked list of shares for the next one and asks it to print its information too. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">printer</td><td>Reference to a serial device on which to print the status </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classBaseShare.html#a6f72027a717afada4679fd08d08bb4b6">BaseShare</a>.</p>

</div>
</div>
<a id="aef08e3bc0686d8032f40613be8c13df4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef08e3bc0686d8032f40613be8c13df4">&#9670;&nbsp;</a></span>put()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class DataType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classShare.html">Share</a>&lt; DataType &gt;::put </td>
          <td>(</td>
          <td class="paramtype">DataType&#160;</td>
          <td class="paramname"><em>new_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Put data into the shared data item. </p>
<p>This method is used to write data into the shared data item. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_data</td><td>The data which is to be written </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="taskshare_8h_source.html">taskshare.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="ataskshare_8h_html"><div class="ttname"><a href="taskshare_8h.html">taskshare.h</a></div><div class="ttdoc">Data which can be shared between tasks in a thread-safe manner.</div></div>
<div class="ttc" id="aclassShare_html"><div class="ttname"><a href="classShare.html">Share</a></div><div class="ttdoc">Class for data to be shared in a thread-safe manner between tasks.</div><div class="ttdef"><b>Definition:</b> taskshare.h:119</div></div>
<div class="ttc" id="aclassShare_html_aef08e3bc0686d8032f40613be8c13df4"><div class="ttname"><a href="classShare.html#aef08e3bc0686d8032f40613be8c13df4">Share::put</a></div><div class="ttdeci">void put(DataType new_data)</div><div class="ttdoc">Put data into the shared data item.</div><div class="ttdef"><b>Definition:</b> taskshare.h:142</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classShare.html">Share</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
